
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NVOLINK | ULTIMATE OVERLORD G-2.0</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">

    <style>
        :root { --blue: #3b82f6; --black: #000; --card: #0d0d0f; --border: rgba(255,255,255,0.08); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { background: var(--black); color: #fff; padding-bottom: 160px; overflow-x: hidden; }

        /* DEV YÜKLENME EKRANI (REBORN) */
        #loading-screen {
            position: fixed; inset: 0; z-index: 99999; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .loader-box { width: 80px; height: 80px; border: 4px solid #111; border-top-color: var(--blue); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* DEV PAYLAŞIM KARTLARI (KÜÇÜLTME YOK) */
        .mega-card {
            background: var(--card); border: 1px solid var(--border);
            border-radius: 45px; overflow: hidden; margin-bottom: 40px;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .mega-card:hover { transform: scale(1.02); border-color: var(--blue); }
        .mega-card img { height: 450px; width: 100%; object-cover: cover; }

        /* KRAL NAVİGASYON */
        .royal-nav {
            position: fixed; bottom: 35px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 500px; height: 95px; z-index: 10000;
            background: rgba(10,10,12,0.9); backdrop-filter: blur(30px);
            border: 1px solid var(--border); border-radius: 40px;
            display: flex; justify-content: space-around; align-items: center;
            box-shadow: 0 40px 80px rgba(0,0,0,0.9);
        }
        .nav-btn { color: #444; display: flex; flex-direction: column; align-items: center; gap: 5px; transition: 0.3s; }
        .nav-btn.active { color: var(--blue); }
        .nav-btn i { font-size: 26px; }
        .nav-btn span { font-size: 10px; font-weight: 800; text-transform: uppercase; }

        .add-btn {
            width: 80px; height: 80px; background: var(--blue);
            border-radius: 28px; display: flex; align-items: center; justify-content: center;
            transform: translateY(-40px); border: 8px solid var(--black);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.4); color: white;
        }

        /* PROFİL FIX */
        .profile-header { padding: 60px 20px; text-align: center; background: linear-gradient(to bottom, #111, #000); border-radius: 0 0 60px 60px; }
        .prof-avatar { width: 150px; height: 150px; border-radius: 50px; border: 5px solid var(--blue); margin: 0 auto 25px; object-fit: cover; }

        /* KATEGORİ CHIPS */
        .cat-bar { display: flex; gap: 15px; overflow-x: auto; padding: 20px 0; scrollbar-width: none; }
        .cat-item { flex: 0 0 auto; padding: 15px 30px; background: #111; border-radius: 20px; font-size: 12px; font-weight: 800; color: #555; }
        .cat-item.active { background: var(--blue); color: #fff; }

        .modal { position: fixed; inset: 0; z-index: 11000; background: rgba(0,0,0,0.98); display: none; align-items: center; justify-content: center; padding: 25px; }
        .modal-inner { background: #0d0d0f; width: 100%; max-width: 450px; border-radius: 50px; padding: 40px; border: 1px solid var(--border); }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="loader-box"></div>
        <h2 class="mt-8 text-2xl font-black italic tracking-tighter">NVO<span class="text-blue-500">LINK</span></h2>
        <p class="text-[10px] text-zinc-600 font-bold uppercase mt-2 tracking-widest">Ağ Protokolleri Yükleniyor...</p>
    </div>

    <header class="p-8 flex justify-between items-center sticky top-0 bg-black/80 backdrop-blur-xl z-[9000] border-b border-white/5">
        <div class="flex items-center gap-5">
            <div class="w-14 h-14 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-600/30">
                <i class="fa-solid fa-crown text-white text-2xl"></i>
            </div>
            <div>
                <h1 class="text-3xl font-black italic tracking-tighter">NVO<span class="text-blue-500">LINK</span></h1>
                <p class="text-[10px] font-black text-zinc-500 uppercase tracking-widest">Master Edition</p>
            </div>
        </div>
        <div id="auth-area">
            <button onclick="nvoAuth.login()" id="btn-login" class="bg-blue-600 px-8 py-4 rounded-2xl font-black text-xs uppercase shadow-xl">Bağlan</button>
            <img id="u-img" class="hidden w-14 h-14 rounded-2xl border-2 border-blue-500 object-cover cursor-pointer" onclick="nvoApp.tab('profile')">
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-6 mt-10">
        
        <section id="tab-feed" class="tab-view">
            <div class="cat-bar" id="cat-list"></div>
            <div id="main-feed" class="mt-10"></div>
        </section>

        <section id="tab-create" class="tab-view hidden">
            <div class="mega-card p-12 space-y-8">
                <h2 class="text-4xl font-black italic">YENİ MODÜL</h2>
                <div onclick="document.getElementById('file-in').click()" class="h-80 bg-black border-4 border-dashed border-white/5 rounded-[50px] flex items-center justify-center overflow-hidden cursor-pointer hover:border-blue-500 transition">
                    <img id="pre-img" class="hidden w-full h-full object-cover">
                    <i id="pre-icon" class="fa-solid fa-cloud-arrow-up text-5xl text-zinc-800"></i>
                </div>
                <input type="file" id="file-in" class="hidden" accept="image/*" onchange="nvoApp.pre(this)">
                
                <input type="text" id="i-t" placeholder="Modül Başlığı" class="w-full bg-black border border-white/10 rounded-3xl p-6 text-lg font-bold outline-none focus:border-blue-500">
                <input type="url" id="i-l" placeholder="Hedef Link" class="w-full bg-black border border-white/10 rounded-3xl p-6 text-lg font-bold outline-none focus:border-blue-500">
                <select id="i-c" class="w-full bg-black border border-white/10 rounded-3xl p-6 text-lg font-bold outline-none"></select>

                <div class="p-8 bg-blue-600/5 rounded-[40px] border border-blue-600/10 space-y-4">
                    <div class="flex justify-between font-black text-xs text-blue-500 uppercase"><span>Görevler</span><span id="t-cnt">0</span></div>
                    <div id="t-ui" class="space-y-3"></div>
                    <div class="flex gap-4">
                        <input type="text" id="tn" placeholder="Ad" class="flex-1 bg-black rounded-2xl p-5 text-sm border border-white/5">
                        <input type="url" id="tu" placeholder="Link" class="flex-1 bg-black rounded-2xl p-5 text-sm border border-white/5">
                    </div>
                    <button onclick="nvoApp.addTask()" class="w-full py-5 bg-zinc-900 rounded-2xl font-black text-xs uppercase">Ekle</button>
                </div>

                <button onclick="nvoApp.deploy()" class="w-full py-8 bg-blue-600 rounded-[40px] font-black text-xl shadow-2xl shadow-blue-600/40">YAYINLA</button>
            </div>
        </section>

        <section id="tab-profile" class="tab-view hidden">
            <div class="profile-header mb-12">
                <img id="p-avatar" class="prof-avatar shadow-2xl shadow-blue-600/20">
                <h2 id="p-name" class="text-4xl font-black italic"></h2>
                <div class="flex justify-center gap-10 mt-10">
                    <div><p id="st-l" class="text-4xl font-black">0</p><p class="text-[10px] text-zinc-500 font-black uppercase">İçerik</p></div>
                    <div><p id="st-v" class="text-4xl font-black">0</p><p class="text-[10px] text-zinc-500 font-black uppercase">İzlenme</p></div>
                </div>
            </div>
            <h3 class="text-2xl font-black italic mb-8 px-4">PAYLAŞIMLARIM</h3>
            <div id="my-feed" class="space-y-6"></div>
        </section>

    </main>

    <nav class="royal-nav">
        <button onclick="nvoApp.tab('feed')" id="n-feed" class="nav-btn active"><i class="fa-solid fa-house"></i><span>Keşfet</span></button>
        <button onclick="nvoApp.tab('create')" id="n-create" class="add-btn"><i class="fa-solid fa-plus text-3xl"></i></button>
        <button onclick="nvoApp.tab('profile')" id="n-profile" class="nav-btn"><i class="fa-solid fa-user-ninja"></i><span>Profil</span></button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, getDocs, deleteDoc, query, where, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDc1sWTsgQC4yqZnEKP4GutuNWcUCZGhv0",
            authDomain: "nvo-link.firebaseapp.com",
            projectId: "nvo-link",
            storageBucket: "nvo-link.firebasestorage.app",
            messagingSenderId: "256153773846",
            appId: "1:256153773846:web:6d51174db82ccccf119237"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        const CATS = ["Hepsi", "Yazılım", "Oyun", "Kripto", "AI Araçları", "Deep Web", "E-Kitap", "Discord", "Premium", "Script", "Grafik", "E-Spor", "Hacker Hub", "Trading", "Metaverse", "Android", "iOS", "Windows", "Config", "Ders Notu", "Sosyal Medya", "Proxy", "Method", "Market", "Donanım", "Oyun Hilesi", "Film/Dizi", "Müzik", "Botlar", "API", "Geliştirici"];

        window.state = { user: null, tasks: [], b64: null, activeCat: "Hepsi" };

        window.nvoApp = {
            init: () => {
                const list = document.getElementById('cat-list'), sel = document.getElementById('i-c');
                CATS.forEach(c => {
                    list.innerHTML += `<button onclick="nvoApp.filter('${c}', this)" class="cat-item ${c==='Hepsi'?'active':''}">${c}</button>`;
                    if(c !== "Hepsi") sel.innerHTML += `<option value="${c}">${c}</option>`;
                });
                setTimeout(() => document.getElementById('loading-screen').style.display='none', 2000);
            },
            tab: (id) => {
                document.querySelectorAll('.tab-view').forEach(v => v.classList.add('hidden'));
                document.querySelectorAll('.nav-btn').forEach(n => n.classList.remove('active'));
                document.getElementById('tab-'+id).classList.remove('hidden');
                document.getElementById('n-'+id)?.classList.add('active');
                if(id === 'feed') nvoApp.loadFeed();
                if(id === 'profile') nvoApp.loadProfile();
            },
            pre: (inp) => {
                const r = new FileReader();
                r.onload = (e) => {
                    document.getElementById('pre-img').src = e.target.result;
                    document.getElementById('pre-img').classList.remove('hidden');
                    document.getElementById('pre-icon').classList.add('hidden');
                    window.state.b64 = e.target.result;
                };
                r.readAsDataURL(inp.files[0]);
            },
            addTask: () => {
                const n = document.getElementById('tn').value, u = document.getElementById('tu').value;
                if(!n || !u) return;
                window.state.tasks.push({n, u});
                document.getElementById('t-ui').innerHTML += `<div class="bg-black/50 p-4 rounded-2xl text-[10px] font-bold border border-white/5 uppercase">${n}</div>`;
                document.getElementById('t-cnt').innerText = window.state.tasks.length;
                document.getElementById('tn').value = ''; document.getElementById('tu').value = '';
            },
            deploy: async () => {
                if(!window.state.user) return alert("Giriş yapmalısın!");
                const t = document.getElementById('i-t').value, l = document.getElementById('i-l').value;
                if(!t || !l || !window.state.b64) return alert("Eksik veri!");
                await addDoc(collection(db, "links"), {
                    title: t, target: l, category: document.getElementById('i-c').value,
                    image: window.state.b64, tasks: window.state.tasks,
                    uid: window.state.user.uid, uName: window.state.user.displayName, uAvatar: window.state.user.photoURL,
                    views: 0, createdAt: serverTimestamp()
                });
                confetti(); setTimeout(() => location.reload(), 1500);
            },
            loadFeed: async () => {
                const feed = document.getElementById('main-feed'); feed.innerHTML = "";
                let q = query(collection(db, "links"), orderBy("createdAt", "desc"));
                if(window.state.activeCat !== "Hepsi") q = query(collection(db, "links"), where("category", "==", window.state.activeCat), orderBy("createdAt", "desc"));
                const snap = await getDocs(q);
                snap.forEach(d => {
                    const data = d.data();
                    feed.innerHTML += `
                        <div class="mega-card group">
                            <img src="${data.image}">
                            <div class="p-10">
                                <span class="bg-blue-600 px-5 py-2 rounded-full text-[10px] font-black uppercase">${data.category}</span>
                                <h3 class="text-3xl font-black italic mt-6 mb-8 group-hover:text-blue-500 transition">${data.title}</h3>
                                <button onclick="location.href='?id=${d.id}'" class="w-full py-6 bg-white text-black rounded-[30px] font-black text-sm uppercase">İncele</button>
                            </div>
                        </div>`;
                });
            },
            loadProfile: async () => {
                if(!window.state.user) return;
                const q = query(collection(db, "links"), where("uid", "==", window.state.user.uid));
                const snap = await getDocs(q);
                document.getElementById('st-l').innerText = snap.size;
                let v = 0; const list = document.getElementById('my-feed'); list.innerHTML = "";
                snap.forEach(d => {
                    v += d.data().views;
                    list.innerHTML += `
                        <div class="mega-card flex flex-row h-40">
                            <img src="${d.data().image}" class="w-1/3 h-full object-cover">
                            <div class="p-6 flex-1 flex flex-col justify-between">
                                <h4 class="font-black text-lg italic uppercase truncate">${d.data().title}</h4>
                                <button onclick="nvoApp.del('${d.id}')" class="text-red-500 text-xs font-black text-left uppercase"><i class="fa-solid fa-trash mr-2"></i>SİL</button>
                            </div>
                        </div>`;
                });
                document.getElementById('st-v').innerText = v;
            },
            del: async (id) => { if(confirm("Silinsin mi?")) { await deleteDoc(doc(db, "links", id)); nvoApp.loadProfile(); } },
            filter: (c, el) => { window.state.activeCat = c; document.querySelectorAll('.cat-item').forEach(b => b.classList.remove('active')); el.classList.add('active'); nvoApp.loadFeed(); }
        };

        window.nvoAuth = {
            login: () => signInWithPopup(auth, provider).then(() => location.reload()),
            init: () => {
                onAuthStateChanged(auth, u => {
                    if(u) {
                        window.state.user = u;
                        document.getElementById('btn-login').classList.add('hidden');
                        document.getElementById('u-img').classList.remove('hidden');
                        document.getElementById('u-img').src = u.photoURL;
                        document.getElementById('p-avatar').src = u.photoURL;
                        document.getElementById('p-name').innerText = u.displayName;
                    }
                    nvoApp.init(); nvoApp.loadFeed();
                });
            }
        };
        nvoAuth.init();
    </script>
</body>
</html>
