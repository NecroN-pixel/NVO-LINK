<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NVO LINK G-0.0.1 | Enterprise SaaS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --p: #6366f1; --s: #06b6d4; --bg: #000000; --card: #111827; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg); color: #f3f4f6; overflow-x: hidden; padding-bottom: 80px; }
        .glass { background: rgba(17, 24, 39, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); }
        .saas-gradient { background: linear-gradient(135deg, var(--p), var(--s)); }
        .nav-item.active { color: #6366f1; }
        .nav-item.active i { transform: translateY(-5px); text-shadow: 0 5px 15px rgba(99, 102, 241, 0.5); }
        .page-entry { animation: fadeUp 0.5s ease-out; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        input, select { background: #1f2937 !important; border: 1px solid #374151 !important; color: white !important; border-radius: 12px !important; }
        
        /* Resim Önizleme */
        .img-preview { width: 100%; height: 150px; object-fit: cover; border-radius: 12px; display: none; }
    </style>
</head>
<body>

    <header class="sticky top-0 z-50 glass px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <img src="https://i.hizliresim.com/placeholder.png" id="siteLogo" class="h-10 object-contain" alt="NVO LINK"> 
            </div>
        <div id="userBadge" class="hidden text-xs font-bold bg-white/10 px-3 py-1 rounded-full border border-white/10">
            <i class="fa-solid fa-user-astronaut text-indigo-400 mr-1"></i> <span id="uName">Misafir</span>
        </div>
    </header>

    <div id="authScreen" class="min-h-[80vh] flex flex-col items-center justify-center p-6 text-center page-entry">
        <div class="w-24 h-24 saas-gradient rounded-3xl flex items-center justify-center mb-6 shadow-2xl rotate-12">
            <i class="fa-solid fa-infinity text-4xl text-white"></i>
        </div>
        <h1 class="text-3xl font-black mb-2 text-white">NVO LINK <span class="text-indigo-500">G-0.0.1</span></h1>
        <p class="text-gray-400 text-sm mb-8">Yeni nesil içerik kilitleme ve sosyal büyüme platformu.</p>
        <button onclick="login()" class="w-full max-w-xs py-4 bg-white text-black font-black rounded-2xl shadow-xl hover:scale-105 transition">
            <i class="fa-brands fa-google mr-2"></i> GOOGLE İLE GİRİŞ
        </button>
    </div>

    <main id="appArea" class="hidden px-4 pt-6">
        
        <section id="view-home" class="page-entry space-y-6">
            <div class="grid grid-cols-2 gap-3">
                <div class="glass p-4 rounded-2xl border-b-4 border-indigo-500">
                    <p class="text-[10px] text-gray-400 font-bold">TOPLAM LİNK</p>
                    <h2 id="statLinks" class="text-2xl font-black mt-1">0</h2>
                </div>
                <div class="glass p-4 rounded-2xl border-b-4 border-cyan-500">
                    <p class="text-[10px] text-gray-400 font-bold">TOPLAM GÖRÜNTÜLENME</p>
                    <h2 id="statViews" class="text-2xl font-black mt-1">0</h2>
                </div>
            </div>

            <button onclick="switchTab('create')" class="w-full py-4 saas-gradient rounded-2xl font-black text-white shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2">
                <i class="fa-solid fa-plus-circle"></i> YENİ LİNK OLUŞTUR
            </button>

            <div>
                <h3 class="font-bold text-sm text-gray-400 mb-3 ml-1">LİNKLERİM</h3>
                <div id="myLinkList" class="space-y-3 pb-20"></div>
            </div>
        </section>

        <section id="view-discovery" class="hidden page-entry pb-20">
            <h2 class="text-xl font-black mb-4 flex items-center gap-2">
                <i class="fa-regular fa-compass text-indigo-400"></i> Keşfet
            </h2>
            <div id="discoveryList" class="grid grid-cols-2 gap-3">
                <div class="col-span-2 text-center text-gray-500 py-10">Yükleniyor...</div>
            </div>
        </section>

        <section id="view-create" class="hidden page-entry pb-20">
            <div class="glass p-6 rounded-3xl border border-white/5">
                <h2 class="font-bold text-lg mb-4">Link Özellikleri</h2>
                
                <div class="space-y-4">
                    <div class="relative">
                        <label class="block text-xs font-bold text-gray-500 mb-2">KAPAK FOTOĞRAFI (Opsiyonel)</label>
                        <input type="file" id="imgInput" accept="image/*" class="hidden" onchange="handleImage(this)">
                        <div onclick="document.getElementById('imgInput').click()" class="w-full h-32 border-2 border-dashed border-gray-600 rounded-xl flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:border-indigo-500 transition">
                            <i class="fa-solid fa-camera text-2xl mb-2"></i>
                            <span class="text-xs">Fotoğraf Seç</span>
                        </div>
                        <img id="preview" class="img-preview mt-3 border border-white/10">
                        <input type="hidden" id="finalImageBase64">
                    </div>

                    <input type="text" id="cTitle" placeholder="Başlık (Örn: GTA 5 Mod)" class="w-full p-3 outline-none">
                    <input type="text" id="cTarget" placeholder="Hedef Link (İndirme Linki)" class="w-full p-3 outline-none">

                    <div class="bg-gray-800/50 p-4 rounded-xl">
                        <p class="text-xs font-bold text-gray-400 mb-2">GÖREVLER</p>
                        <div id="taskPreview" class="space-y-2 mb-3"></div>
                        <div class="flex gap-2 mb-2">
                            <select id="tType" class="p-2 text-xs w-1/3">
                                <option value="youtube">YouTube</option>
                                <option value="instagram">Instagram</option>
                                <option value="discord">Discord</option>
                                <option value="tiktok">TikTok</option>
                                <option value="link">Website</option>
                            </select>
                            <input type="text" id="tName" placeholder="Açıklama" class="p-2 text-xs w-2/3">
                        </div>
                        <input type="text" id="tLink" placeholder="Görev URL" class="w-full p-2 text-xs mb-2">
                        <button onclick="addTask()" class="w-full py-2 bg-indigo-500/20 text-indigo-400 text-xs font-bold rounded-lg">+ EKLE</button>
                    </div>

                    <button onclick="publish()" class="w-full py-4 bg-white text-black font-black rounded-xl">YAYINLA</button>
                </div>
            </div>
        </section>

        <section id="view-profile" class="hidden page-entry pb-20 text-center">
            <div class="glass p-8 rounded-[3rem] border border-white/5 relative overflow-hidden mt-4">
                <div class="absolute top-0 left-0 w-full h-20 bg-gradient-to-b from-indigo-500/20 to-transparent"></div>
                <img id="pAvatar" src="" class="w-24 h-24 rounded-full border-4 border-indigo-500 mx-auto relative z-10 shadow-2xl">
                <h2 id="pName" class="text-xl font-black mt-4">Kullanıcı</h2>
                <p id="pEmail" class="text-xs text-gray-500 mb-6">user@gmail.com</p>

                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="bg-white/5 p-3 rounded-2xl">
                        <i class="fa-solid fa-trophy text-yellow-500 text-xl mb-1"></i>
                        <p class="text-[10px] font-bold">SEVİYE</p>
                        <h3 class="font-bold">G-0.0.1</h3>
                    </div>
                    <div class="bg-white/5 p-3 rounded-2xl">
                        <i class="fa-solid fa-chart-bar text-green-500 text-xl mb-1"></i>
                        <p class="text-[10px] font-bold">ETKİLEŞİM</p>
                        <h3 id="pTotalViews" class="font-bold">0</h3>
                    </div>
                </div>

                <button onclick="logout()" class="text-red-500 text-sm font-bold bg-red-500/10 px-6 py-3 rounded-xl w-full">ÇIKIŞ YAP</button>
            </div>
        </section>

    </main>

    <div id="visitorArea" class="hidden min-h-screen bg-black z-[100] relative">
        <div class="h-60 w-full relative">
            <img id="vCover" src="" class="w-full h-full object-cover opacity-50">
            <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent"></div>
            <div class="absolute bottom-4 left-4 right-4">
                <h1 id="vTitle" class="text-2xl font-black text-white leading-tight">...</h1>
                <div class="flex items-center gap-2 mt-2">
                    <span class="text-[10px] bg-indigo-600 px-2 py-0.5 rounded text-white">G-0.0.1</span>
                    <span class="text-[10px] text-gray-400"><i class="fa-solid fa-eye"></i> <span id="vCount">0</span></span>
                </div>
            </div>
        </div>
        
        <div class="p-6 -mt-6 bg-black rounded-t-3xl relative z-10">
             <div id="vTaskList" class="space-y-4"></div>
             <button id="vUnlock" disabled class="w-full mt-8 py-4 bg-gray-800 text-gray-500 font-bold rounded-xl flex items-center justify-center gap-2">
                 <i class="fa-solid fa-lock"></i> KİLİTLİ
             </button>
        </div>
    </div>

    <nav id="bottomNav" class="fixed bottom-0 w-full glass pb-safe pt-2 px-6 flex justify-between items-center z-40 hidden border-t border-white/5 pb-4">
        <button onclick="switchTab('home')" class="nav-item active flex flex-col items-center gap-1 transition-all text-gray-500 p-2">
            <i class="fa-solid fa-house text-xl transition-transform"></i>
        </button>
        <button onclick="switchTab('discovery')" class="nav-item flex flex-col items-center gap-1 transition-all text-gray-500 p-2">
            <i class="fa-solid fa-compass text-xl transition-transform"></i>
        </button>
        <div class="w-12"></div> <button onclick="switchTab('create')" class="absolute left-1/2 -translate-x-1/2 -top-6 w-14 h-14 saas-gradient rounded-full flex items-center justify-center shadow-lg shadow-indigo-500/40 border-4 border-black text-white">
            <i class="fa-solid fa-plus text-xl"></i>
        </button>
        <button onclick="switchTab('profile')" class="nav-item flex flex-col items-center gap-1 transition-all text-gray-500 p-2">
            <i class="fa-solid fa-user text-xl transition-transform"></i>
        </button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, getDoc, getDocs, deleteDoc, query, where, orderBy, limit, serverTimestamp, writeBatch, increment, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDc1sWTsgQC4yqZnEKP4GutuNWcUCZGhv0",
            authDomain: "nvo-link.firebaseapp.com",
            projectId: "nvo-link",
            storageBucket: "nvo-link.firebasestorage.app",
            messagingSenderId: "256153773846",
            appId: "1:256153773846:web:6d51174db82ccccf119237"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        let tasks = [];
        let currentUser = null;
        const urlParams = new URLSearchParams(window.location.search);
        const linkId = urlParams.get('id');

        // LOGO UPDATE
        // Kullanıcının attığı logoyu base64 veya URL olarak buraya tanımlayalım.
        const LOGO_URL = "https://i.ibb.co/3WqP7W8/19124-removebg-preview.png"; // Placeholder for the user logo if they host it. 
        // Kod çalışınca üstteki img src'si güncellenir.
        document.getElementById('siteLogo').src = "https://i.imgur.com/Kj7j4Lp.png"; // Geçici placeholder, buraya kendi URL'ni koyarsan süper olur.
        // Kullanıcının istediği logoyu simüle etmek için CSS ile basit bir text logo yapabiliriz veya img src değiştirebiliriz.

        // --- AUTH & ROUTING ---
        onAuthStateChanged(auth, user => {
            if (linkId) {
                document.getElementById('visitorArea').classList.remove('hidden');
                loadVisitor(linkId);
            } else if (user) {
                currentUser = user;
                document.getElementById('authScreen').classList.add('hidden');
                document.getElementById('appArea').classList.remove('hidden');
                document.getElementById('bottomNav').classList.remove('hidden');
                
                // Header Update
                document.getElementById('userBadge').classList.remove('hidden');
                document.getElementById('userBadge').classList.add('flex');
                document.getElementById('uName').innerText = user.displayName.split(' ')[0];
                
                // Profile Data
                document.getElementById('pAvatar').src = user.photoURL;
                document.getElementById('pName').innerText = user.displayName;
                document.getElementById('pEmail').innerText = user.email;

                loadDashboard();
            } else {
                document.getElementById('authScreen').classList.remove('hidden');
            }
        });

        window.login = () => signInWithPopup(auth, provider).catch(e => alert("Giriş Hatası: " + e.message));
        window.logout = () => signOut(auth).then(() => location.reload());

        // --- NAVIGATION ---
        window.switchTab = (tab) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById(`view-${tab}`).classList.remove('hidden');
            
            // Tab specific loads
            if(tab === 'home') loadDashboard();
            if(tab === 'discovery') loadDiscovery();
            
            // Icon styling
            const map = { 'home': 0, 'discovery': 1, 'profile': 2 };
            if(map[tab] !== undefined) document.querySelectorAll('.nav-item')[map[tab]].classList.add('active');
        };

        // --- IMAGE COMPRESSION (CANVAS) ---
        window.handleImage = (input) => {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    let width = img.width;
                    let height = img.height;
                    
                    // 500px Limit Kuralı
                    if (width > 500) {
                        height *= 500 / width;
                        width = 500;
                    }

                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Kaliteyi düşür (0.7)
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.7);
                    
                    document.getElementById('preview').src = dataUrl;
                    document.getElementById('preview').style.display = 'block';
                    document.getElementById('finalImageBase64').value = dataUrl;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        };

        // --- DASHBOARD ---
        async function loadDashboard() {
            if(!currentUser) return;
            const q = query(collection(db, "links"), where("uid", "==", currentUser.uid), orderBy("createdAt", "desc"));
            
            try {
                const snap = await getDocs(q);
                let totalViews = 0;
                let html = "";
                
                snap.forEach(d => {
                    const data = d.data();
                    totalViews += (data.views || 0);
                    const linkUrl = window.location.origin + window.location.pathname + "?id=" + d.id;
                    
                    html += `
                        <div class="glass p-4 rounded-2xl flex items-center gap-3">
                            <div class="w-12 h-12 rounded-lg bg-gray-800 bg-cover bg-center shrink-0" style="background-image: url('${data.image || "https://via.placeholder.com/150"}')"></div>
                            <div class="flex-1 overflow-hidden">
                                <h4 class="font-bold text-sm truncate">${data.title}</h4>
                                <p class="text-[10px] text-gray-500"><i class="fa-solid fa-eye"></i> ${data.views || 0}</p>
                            </div>
                            <button onclick="navigator.clipboard.writeText('${linkUrl}');alert('Link Kopyalandı!')" class="w-8 h-8 rounded bg-white/5 flex items-center justify-center text-gray-400">
                                <i class="fa-solid fa-link"></i>
                            </button>
                            <button onclick="deleteLink('${d.id}')" class="w-8 h-8 rounded bg-red-500/10 flex items-center justify-center text-red-500">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                    `;
                });

                document.getElementById('statLinks').innerText = snap.size;
                document.getElementById('statViews').innerText = totalViews;
                document.getElementById('pTotalViews').innerText = totalViews;
                document.getElementById('myLinkList').innerHTML = html || "<p class='text-center text-gray-600 text-sm'>Henüz link yok.</p>";
            } catch (error) {
                console.error("Dashboard Error:", error);
                // alert("Veri çekilemedi. Lütfen Firestore Indexes ayarını kontrol et.");
            }
        }

        window.deleteLink = async (id) => {
            if(confirm("Silmek istediğine emin misin?")) {
                await deleteDoc(doc(db, "links", id));
                loadDashboard();
            }
        };

        // --- DISCOVERY (KEŞFET) ---
        async function loadDiscovery() {
            // En çok görüntülenen son 20 link
            const q = query(collection(db, "links"), orderBy("views", "desc"), limit(20));
            try {
                const snap = await getDocs(q);
                let html = "";
                snap.forEach(d => {
                    const data = d.data();
                    const linkUrl = window.location.origin + window.location.pathname + "?id=" + d.id;
                    html += `
                        <div onclick="window.open('${linkUrl}', '_blank')" class="glass p-2 rounded-xl cursor-pointer hover:bg-white/5 transition">
                            <div class="w-full h-32 rounded-lg bg-gray-800 bg-cover bg-center mb-2 relative" style="background-image: url('${data.image || "https://via.placeholder.com/300x200?text=NVO"}')">
                                <span class="absolute top-1 right-1 bg-black/60 text-white text-[9px] px-1.5 rounded font-bold">
                                    <i class="fa-solid fa-eye"></i> ${data.views || 0}
                                </span>
                            </div>
                            <h4 class="font-bold text-xs truncate px-1">${data.title}</h4>
                        </div>
                    `;
                });
                document.getElementById('discoveryList').innerHTML = html;
            } catch (e) {
                document.getElementById('discoveryList').innerHTML = `<p class="col-span-2 text-center text-red-500 text-xs">Keşfet yüklenemedi. Index hatası olabilir.<br>${e.message}</p>`;
            }
        }

        // --- CREATE ---
        window.addTask = () => {
            const type = document.getElementById('tType').value;
            const name = document.getElementById('tName').value;
            const link = document.getElementById('tLink').value;
            if(name && link) {
                tasks.push({type, name, link: link.startsWith('http') ? link : 'https://'+link});
                renderTasks();
                document.getElementById('tName').value = "";
                document.getElementById('tLink').value = "";
            }
        };

        function renderTasks() {
            document.getElementById('taskPreview').innerHTML = tasks.map((t,i) => `
                <div class="flex justify-between items-center bg-black/20 p-2 rounded text-xs">
                    <span><i class="fa-brands fa-${t.type==='link'?'chrome':t.type}"></i> ${t.name}</span>
                    <i onclick="tasks.splice(${i},1);renderTasks()" class="fa-solid fa-xmark text-red-400 cursor-pointer"></i>
                </div>
            `).join('');
        }

        window.publish = async () => {
            const title = document.getElementById('cTitle').value;
            const target = document.getElementById('cTarget').value;
            const image = document.getElementById('finalImageBase64').value; // Base64 string

            if(!title || !target || tasks.length === 0) return alert("Başlık, Link ve en az 1 görev gerekli!");

            try {
                const docRef = await addDoc(collection(db, "links"), {
                    title,
                    target: target.startsWith('http') ? target : 'https://'+target,
                    image: image || null,
                    uid: currentUser.uid,
                    views: 0,
                    createdAt: serverTimestamp()
                });

                const batch = writeBatch(db);
                tasks.forEach((t, i) => {
                    batch.set(doc(collection(db, "links", docRef.id, "tasks")), {...t, order: i});
                });
                await batch.commit();
                
                alert("Link Oluşturuldu!");
                switchTab('home');
                tasks = []; renderTasks();
                document.getElementById('cTitle').value=""; document.getElementById('cTarget').value="";
                document.getElementById('preview').style.display='none';
            } catch (e) {
                alert("Hata: " + e.message);
            }
        };

        // --- VISITOR ---
        async function loadVisitor(id) {
            const dRef = doc(db, "links", id);
            try {
                const snap = await getDoc(dRef);
                if(!snap.exists()) return document.getElementById('vTitle').innerText = "Link Bulunamadı";
                
                const data = snap.data();
                updateDoc(dRef, { views: increment(1) }); // View counter

                document.getElementById('vTitle').innerText = data.title;
                document.getElementById('vCount').innerText = (data.views || 0) + 1;
                
                if(data.image) {
                    document.getElementById('vCover').src = data.image;
                } else {
                    document.getElementById('vCover').src = "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1000&auto=format&fit=crop"; // Default abstract bg
                }

                const tSnap = await getDocs(collection(db, "links", id, "tasks"));
                const tData = [];
                tSnap.forEach(t => tData.push(t.data()));

                const list = document.getElementById('vTaskList');
                if(tData.length === 0) return unlock(data.target);

                list.innerHTML = tData.map((t, i) => `
                    <div id="step-${i}" class="glass p-4 rounded-xl flex items-center justify-between border-l-4 ${i===0?'border-indigo-500':'border-transparent opacity-50 pointer-events-none'}">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-indigo-400">
                                <i class="fa-brands fa-${t.type==='link'?'chrome':t.type}"></i>
                            </div>
                            <div class="text-sm font-bold text-white">${t.name}</div>
                        </div>
                        <button id="btn-${i}" onclick="doTask(${i}, '${t.link}', ${tData.length}, '${data.target}')" class="px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg ${i===0?'':'hidden'}">YAP</button>
                    </div>
                `).join('');
            } catch (e) {
                console.log(e);
            }
        }

        window.doTask = (i, url, total, target) => {
            window.open(url, '_blank');
            const btn = document.getElementById(`btn-${i}`);
            let sec = 8;
            const timer = setInterval(() => {
                btn.disabled = true;
                btn.innerText = sec + "s";
                btn.classList.add('bg-gray-600');
                sec--;
                if(sec < 0) {
                    clearInterval(timer);
                    btn.remove();
                    document.getElementById(`step-${i}`).classList.remove('border-indigo-500');
                    document.getElementById(`step-${i}`).classList.add('border-green-500');
                    document.getElementById(`step-${i}`).innerHTML += '<i class="fa-solid fa-check-circle text-green-500 text-xl"></i>';
                    
                    if(i+1 < total) {
                        const next = document.getElementById(`step-${i+1}`);
                        next.classList.remove('opacity-50', 'pointer-events-none', 'border-transparent');
                        next.classList.add('border-indigo-500');
                        document.getElementById(`btn-${i+1}`).classList.remove('hidden');
                    } else {
                        unlock(target);
                    }
                }
            }, 1000);
        };

        function unlock(url) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            const btn = document.getElementById('vUnlock');
            btn.disabled = false;
            btn.classList.remove('bg-gray-800', 'text-gray-500');
            btn.classList.add('saas-gradient', 'text-white', 'animate-bounce');
            btn.innerHTML = '<i class="fa-solid fa-download"></i> DOSYAYI İNDİR';
            btn.onclick = () => window.location.href = url;
        }
    </script>
</body>
</html>