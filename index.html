
<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NVOLINK G-0.1.4 | FULL ENTERPRISE EDITION</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- NVOLINK MASTER DESIGN SYSTEM --- */
        :root {
            --primary: #3b82f6;
            --primary-glow: rgba(59, 130, 246, 0.5);
            --secondary: #8b5cf6;
            --bg-deep: #000000;
            --bg-card: #0a0a0b;
            --bg-input: #111112;
            --border-color: #1f1f22;
            --text-main: #f3f4f6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg-deep); color: var(--text-main); overflow-x: hidden; }

        /* --- PRELOADER ANIMATION --- */
        #nvo-preloader {
            position: fixed; inset: 0; z-index: 20000; background: var(--bg-deep);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease;
        }
        .loader-bar-container { width: 240px; height: 3px; background: #111; border-radius: 10px; margin-top: 40px; overflow: hidden; position: relative; }
        #loader-progress { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--secondary)); box-shadow: 0 0 15px var(--primary); }

        /* --- LOGO ENGINE --- */
        .nvo-logo-wrapper { display: flex; align-items: center; gap: 14px; cursor: pointer; }
        .nvo-icon-box { 
            width: 48px; height: 48px; background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%); 
            border-radius: 14px; display: flex; align-items: center; justify-content: center; 
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3); position: relative; overflow: hidden; 
        }
        .nvo-infinity { font-size: 22px; color: #fff; }
        .brand-main { font-size: 26px; font-weight: 800; letter-spacing: -1.2px; color: #fff; }
        .brand-link { color: var(--primary); }

        /* --- UI COMPONENTS --- */
        .nvo-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 28px; transition: 0.3s; overflow: hidden; }
        .nvo-card:hover { border-color: #333; transform: translateY(-4px); }
        .nvo-input { background: var(--bg-input) !important; border: 1px solid var(--border-color) !important; border-radius: 20px !important; color: #fff !important; padding: 18px 24px !important; width: 100%; outline: none; }
        .nvo-input:focus { border-color: var(--primary) !important; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 18px; border-radius: 22px; font-weight: 800; text-transform: uppercase; width: 100%; cursor: pointer; border: none; box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2); }

        /* --- TASK SYSTEM --- */
        .task-row { background: #161618; padding: 16px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #222; margin-bottom: 10px; }
        .gw-task-btn { background: #0c0c0e; border: 1px solid #1f1f22; padding: 20px; border-radius: 24px; width: 100%; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; transition: 0.3s; }
        .gw-task-btn.done { border-color: #10b981; background: rgba(16, 185, 129, 0.05); }

        /* --- NAVIGATION --- */
        .bottom-nav { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 480px; height: 80px; background: rgba(10, 10, 11, 0.8); backdrop-filter: blur(30px); border-radius: 40px; display: flex; justify-content: space-around; align-items: center; z-index: 9000; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .nav-link { color: #4b5563; font-size: 26px; transition: 0.4s; padding: 12px; }
        .nav-link.active { color: var(--primary); transform: translateY(-10px); }

        .cat-chip { padding: 10px 22px; background: #111; border-radius: 100px; font-size: 11px; font-weight: 800; color: #555; border: 1px solid #222; white-space: nowrap; cursor: pointer; }
        .cat-chip.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3); }

        #nvo-qr-modal { position: fixed; inset: 0; z-index: 18000; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .qr-container { background: white; padding: 35px; border-radius: 45px; text-align: center; }

        /* --- GATEWAY OVERLAY --- */
        #nvo-gateway { position: fixed; inset: 0; z-index: 15000; background: #000; display: none; overflow-y: auto; padding-bottom: 50px; }
    </style>
</head>
<body class="pb-32">

    <div id="nvo-preloader">
        <div class="nvo-logo-wrapper justify-center mb-8">
            <div class="nvo-icon-box"><i class="fa-solid fa-infinity nvo-infinity"></i></div>
            <div class="nvo-brand-text text-left"><span class="brand-main">NVO<span class="brand-link">LINK</span></span></div>
        </div>
        <div class="loader-bar-container"><div id="loader-progress"></div></div>
        <p class="mt-6 text-[10px] font-black text-zinc-600 uppercase tracking-[0.5em]">Enterprise System Booting</p>
    </div>

    <header class="sticky top-0 z-[8000] bg-black/80 backdrop-blur-2xl border-b border-white/5 px-6 py-5">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <div class="nvo-logo-wrapper" onclick="location.reload()">
                <div class="nvo-icon-box scale-90"><i class="fa-solid fa-infinity nvo-infinity"></i></div>
                <div class="nvo-brand-text"><span class="brand-main text-xl">NVO<span class="brand-link">LINK</span></span><span class="text-[8px] font-bold text-zinc-600 tracking-widest uppercase">Full Edition</span></div>
            </div>
            <div id="auth-zone" class="flex items-center gap-4">
                <button id="auth-login-btn" onclick="nvoAuth.login()" class="bg-white text-black px-6 py-2.5 rounded-2xl font-black text-xs">GİRİŞ YAP</button>
                <div id="auth-user" class="hidden flex items-center gap-3 bg-zinc-900/50 p-1 rounded-2xl border border-white/5">
                    <img id="header-avatar" class="w-10 h-10 rounded-xl object-cover border border-blue-600/50">
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-xl mx-auto px-6 mt-10">
        
        <div id="view-discovery" class="nvo-view space-y-8">
            <div class="relative group">
                <i class="fa-solid fa-search absolute left-6 top-1/2 -translate-y-1/2 text-zinc-600"></i>
                <input type="text" oninput="nvoApp.search(this.value)" placeholder="Kampanya veya kategori ara..." class="nvo-input pl-16">
            </div>

            <div class="flex gap-3 overflow-x-auto no-scrollbar py-2">
                <button onclick="nvoApp.filter('Hepsi', this)" class="cat-chip active">Hepsi</button>
                <button onclick="nvoApp.filter('Oyun', this)" class="cat-chip">Oyun</button>
                <button onclick="nvoApp.filter('Yazılım', this)" class="cat-chip">Yazılım</button>
                <button onclick="nvoApp.filter('Medya', this)" class="cat-chip">Medya</button>
            </div>

            <div id="feed-container" class="space-y-10"></div>
        </div>

        <div id="view-create" class="nvo-view hidden">
            <div class="nvo-card p-8 space-y-8">
                <div class="text-center">
                    <h2 class="text-3xl font-black italic">YENİ KAMPANYA</h2>
                    <p class="text-[10px] text-zinc-500 font-bold uppercase mt-2 tracking-widest">Dosyanı Kilitle ve Paylaş</p>
                </div>

                <div onclick="document.getElementById('file-upload').click()" class="h-56 bg-zinc-900 rounded-[2.5rem] border-2 border-dashed border-zinc-800 flex flex-col items-center justify-center cursor-pointer group hover:border-blue-500 transition relative overflow-hidden">
                    <img id="create-preview" class="hidden w-full h-full object-cover">
                    <div id="hint-ui" class="text-center">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl text-zinc-700 mb-4 group-hover:text-blue-500 transition"></i>
                        <p class="text-xs font-black text-zinc-600 uppercase">Kapak Fotoğrafı</p>
                    </div>
                </div>
                <input type="file" id="file-upload" class="hidden" accept="image/*" onchange="nvoApp.handleImage(this)">

                <div class="space-y-4">
                    <input type="text" id="inp-title" placeholder="Kampanya Başlığı" class="nvo-input">
                    <input type="url" id="inp-target" placeholder="Hedef Link (İndirme Linki)" class="nvo-input">
                    <select id="inp-cat" class="nvo-input">
                        <option value="Oyun">Oyun</option>
                        <option value="Yazılım">Yazılım</option>
                        <option value="Medya">Medya</option>
                    </select>
                </div>

                <div class="bg-zinc-900/40 p-6 rounded-[2.5rem] border border-white/5">
                    <p class="text-[10px] font-black text-blue-500 uppercase mb-4 tracking-widest">Görev Tanımlama</p>
                    <div id="task-list-display" class="space-y-2 mb-6"></div>
                    <div class="space-y-3">
                        <input type="text" id="task-name" placeholder="Görev Adı (Örn: YouTube Abone Ol)" class="nvo-input !p-4 !text-xs">
                        <input type="url" id="task-url" placeholder="Görev Linki" class="nvo-input !p-4 !text-xs">
                        <button onclick="nvoApp.addTask()" class="w-full bg-zinc-800 py-4 rounded-2xl text-[10px] font-black uppercase tracking-tighter hover:bg-zinc-700">LİSTEYE EKLE</button>
                    </div>
                </div>

                <button onclick="nvoApp.publish()" id="pub-btn" class="btn-primary py-5">KAMPANYAYI BAŞLAT</button>
            </div>
        </div>

        <div id="view-profile" class="nvo-view hidden space-y-8">
            <div class="nvo-card p-10 text-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-600 to-purple-600"></div>
                <img id="prof-avatar" class="w-28 h-28 rounded-[2.5rem] mx-auto mb-6 border-4 border-zinc-900 shadow-2xl object-cover">
                <h3 id="prof-name" class="text-2xl font-black mb-2">...</h3>
                <p id="prof-email" class="text-xs text-zinc-500 font-bold uppercase tracking-widest"></p>
                
                <div class="grid grid-cols-2 gap-4 mt-8">
                    <div class="bg-zinc-900/50 p-6 rounded-3xl border border-white/5">
                        <h4 id="stat-count" class="text-2xl font-black">0</h4>
                        <p class="text-[9px] text-zinc-600 font-black uppercase">Paylaşım</p>
                    </div>
                    <div class="bg-zinc-900/50 p-6 rounded-3xl border border-white/5">
                        <h4 id="stat-views" class="text-2xl font-black">0</h4>
                        <p class="text-[9px] text-zinc-600 font-black uppercase">İzlenme</p>
                    </div>
                </div>
                <button onclick="nvoAuth.logout()" class="mt-10 text-[10px] text-red-500/50 font-black uppercase tracking-[0.2em] hover:text-red-500 transition">Oturumu Kapat</button>
            </div>
            <div id="prof-links" class="space-y-4"></div>
        </div>

    </main>

    <div id="nvo-gateway">
        <div class="max-w-md mx-auto p-6 pt-12">
            <div class="nvo-logo-wrapper justify-center mb-12">
                <div class="nvo-icon-box"><i class="fa-solid fa-infinity nvo-infinity"></i></div>
                <div class="nvo-brand-text"><span class="brand-main">NVO<span class="brand-link">LINK</span></span></div>
            </div>
            <div class="nvo-card">
                <img id="gw-img" class="w-full h-60 object-cover">
                <div class="p-8">
                    <span class="bg-blue-600/10 text-blue-500 text-[9px] font-black px-4 py-1.5 rounded-full uppercase mb-4 inline-block">Güvenli İçerik</span>
                    <h2 id="gw-title" class="text-3xl font-black mb-4"></h2>
                    <p class="text-xs text-zinc-500 font-medium leading-relaxed mb-8">Bu içeriğe erişmek için aşağıdaki görevleri sırayla tamamlamanız gerekmektedir.</p>
                    
                    <div id="gw-tasks" class="space-y-3"></div>
                    
                    <button id="gw-download" disabled class="btn-primary mt-10 opacity-20 cursor-not-allowed">
                        KİLİDİ AÇ VE İNDİR
                    </button>
                    <p class="text-center text-[9px] text-zinc-700 font-bold uppercase mt-6 tracking-[0.3em]">NVOLINK Cloud Protection</p>
                </div>
            </div>
        </div>
    </div>

    <div id="nvo-qr-modal" onclick="this.style.display='none'">
        <div class="qr-container" onclick="event.stopPropagation()">
            <div id="qr-target" class="mb-6"></div>
            <p class="text-black text-[10px] font-black uppercase tracking-widest">Cihazdan Tara ve Git</p>
        </div>
    </div>

    <nav class="bottom-nav">
        <button onclick="nvoApp.switchTab('discovery')" class="nav-link active" id="btn-discovery"><i class="fa-solid fa-compass"></i></button>
        <button onclick="nvoApp.switchTab('create')" class="nav-link" id="btn-create"><i class="fa-solid fa-square-plus text-4xl text-blue-500"></i></button>
        <button onclick="nvoApp.switchTab('profile')" class="nav-link" id="btn-profile"><i class="fa-solid fa-user-astronaut"></i></button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, getDoc, getDocs, updateDoc, deleteDoc, query, where, orderBy, serverTimestamp, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDc1sWTsgQC4yqZnEKP4GutuNWcUCZGhv0",
            authDomain: "nvo-link.firebaseapp.com",
            projectId: "nvo-link",
            storageBucket: "nvo-link.firebasestorage.app",
            messagingSenderId: "256153773846",
            appId: "1:256153773846:web:6d51174db82ccccf119237"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.nvoData = { user: null, b64: null, tasks: [], done: 0, cat: 'Hepsi' };

        window.nvoAuth = {
            login: () => signInWithPopup(auth, provider),
            logout: () => signOut(auth).then(() => location.reload()),
            check: () => {
                onAuthStateChanged(auth, u => {
                    const lid = new URLSearchParams(window.location.search).get('id');
                    if(lid) { nvoApp.renderGateway(lid); }
                    else if(u) {
                        window.nvoData.user = u;
                        document.getElementById('auth-login-btn').classList.add('hidden');
                        document.getElementById('auth-user').classList.remove('hidden');
                        document.getElementById('header-avatar').src = u.photoURL;
                        document.getElementById('prof-avatar').src = u.photoURL;
                        document.getElementById('prof-name').innerText = u.displayName;
                        document.getElementById('prof-email').innerText = u.email;
                        nvoApp.switchTab('discovery');
                    }
                    nvoApp.runPreloader();
                });
            }
        };

        window.nvoApp = {
            runPreloader: () => {
                let p = 0;
                const itv = setInterval(() => {
                    p += Math.floor(Math.random() * 15) + 5;
                    document.getElementById('loader-progress').style.width = p + '%';
                    if(p >= 100) { 
                        clearInterval(itv); 
                        setTimeout(() => {
                            document.getElementById('nvo-preloader').style.opacity = '0';
                            setTimeout(() => document.getElementById('nvo-preloader').remove(), 800);
                        }, 500);
                    }
                }, 100);
            },
            switchTab: (id) => {
                document.querySelectorAll('.nvo-view').forEach(v => v.classList.add('hidden'));
                document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
                document.getElementById('view-'+id).classList.remove('hidden');
                document.getElementById('btn-'+id).classList.add('active');
                if(id === 'discovery') nvoApp.loadFeed();
                if(id === 'profile') nvoApp.loadProfile();
            },
            handleImage: (i) => {
                const r = new FileReader();
                r.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let w = img.width; if(w > 800) w = 800;
                        canvas.width = w; canvas.height = (img.height * w) / img.width;
                        canvas.getContext('2d').drawImage(img, 0, 0, w, canvas.height);
                        window.nvoData.b64 = canvas.toDataURL('image/jpeg', 0.7);
                        document.getElementById('create-preview').src = window.nvoData.b64;
                        document.getElementById('create-preview').classList.remove('hidden');
                        document.getElementById('hint-ui').classList.add('hidden');
                    };
                    img.src = e.target.result;
                };
                r.readAsDataURL(i.files[0]);
            },
            addTask: () => {
                const n = document.getElementById('task-name').value, u = document.getElementById('task-url').value;
                if(!n || !u) return;
                window.nvoData.tasks.push({name: n, url: u});
                document.getElementById('task-list-display').innerHTML += `
                    <div class="task-row">
                        <span class="text-[10px] font-black uppercase tracking-tighter">${n}</span>
                        <i class="fa-solid fa-check-double text-blue-500 text-xs"></i>
                    </div>`;
                document.getElementById('task-name').value = ""; document.getElementById('task-url').value = "";
            },
            publish: async () => {
                const t = document.getElementById('inp-title').value, tg = document.getElementById('inp-target').value, c = document.getElementById('inp-cat').value;
                const btn = document.getElementById('pub-btn');
                if(!t || !tg || !window.nvoData.b64) return alert("Hata: Başlık, Link ve Görsel zorunludur!");
                btn.innerText = "YAYINLANIYOR..."; btn.disabled = true;
                await addDoc(collection(db, "links"), {
                    title: t, target: tg, category: c, image: window.nvoData.b64, tasks: window.nvoData.tasks,
                    uid: window.nvoData.user.uid, uName: window.nvoData.user.displayName, uAvatar: window.nvoData.user.photoURL,
                    views: 0, createdAt: serverTimestamp()
                });
                confetti(); setTimeout(() => location.reload(), 1500);
            },
            loadFeed: async (searchVal = "") => {
                const container = document.getElementById('feed-container');
                let q = query(collection(db, "links"), orderBy("createdAt", "desc"));
                if(window.nvoData.cat !== 'Hepsi') q = query(collection(db, "links"), where("category", "==", window.nvoData.cat), orderBy("createdAt", "desc"));
                const snap = await getDocs(q);
                container.innerHTML = "";
                snap.forEach(d => {
                    const data = d.data();
                    if(searchVal && !data.title.toLowerCase().includes(searchVal.toLowerCase())) return;
                    container.innerHTML += `
                        <div class="nvo-card">
                            <div class="relative h-60">
                                <img src="${data.image}" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                                <div class="absolute top-4 left-4 bg-blue-600 text-white text-[9px] font-black px-4 py-1.5 rounded-full uppercase tracking-widest">${data.category}</div>
                                <div class="absolute bottom-6 left-6 right-6">
                                    <h3 class="text-2xl font-black text-white leading-tight mb-2">${data.title}</h3>
                                    <p class="text-[10px] text-zinc-400 font-bold uppercase"><i class="fa-solid fa-eye text-blue-500 mr-2"></i>${data.views || 0} İzlenme</p>
                                </div>
                            </div>
                            <div class="p-6 flex justify-between items-center bg-zinc-900/20">
                                <div class="flex items-center gap-3">
                                    <img src="${data.uAvatar}" class="w-9 h-9 rounded-full border border-white/10">
                                    <span class="text-xs font-bold text-zinc-500">${data.uName}</span>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="nvoApp.openQR('${d.id}')" class="w-11 h-11 bg-zinc-800 rounded-xl flex items-center justify-center text-zinc-400"><i class="fa-solid fa-qrcode text-sm"></i></button>
                                    <button onclick="location.href='?id=${d.id}'" class="bg-blue-600/10 text-blue-500 border border-blue-500/20 px-6 py-2.5 rounded-xl text-[10px] font-black uppercase">Kilidi Aç</button>
                                </div>
                            </div>
                        </div>`;
                });
            },
            openQR: (id) => {
                const m = document.getElementById('nvo-qr-modal');
                const t = document.getElementById('qr-target');
                t.innerHTML = ""; m.style.display = 'flex';
                new QRCode(t, { text: window.location.origin + window.location.pathname + "?id=" + id, width: 220, height: 220 });
            },
            renderGateway: async (id) => {
                const gw = document.getElementById('nvo-gateway');
                gw.style.display = 'block';
                const s = await getDoc(doc(db, "links", id));
                const d = s.data();
                document.getElementById('gw-img').src = d.image;
                document.getElementById('gw-title').innerText = d.title;
                const tBox = document.getElementById('gw-tasks');
                tBox.innerHTML = d.tasks.length > 0 ? d.tasks.map((t, i) => `
                    <button id="gt-${i}" onclick="nvoApp.doTask('${t.url}', ${i}, ${d.tasks.length}, '${d.target}', '${id}')" class="gw-task-btn">
                        <span class="text-xs font-black uppercase tracking-tight text-zinc-300">${t.name}</span>
                        <div class="w-8 h-8 rounded-full bg-zinc-900 flex items-center justify-center"><i class="fa-solid fa-chevron-right text-[10px] text-zinc-600"></i></div>
                    </button>`).join('') : `<p class="text-center py-4 text-zinc-600 text-xs font-bold uppercase">Görev bulunmuyor, direkt geçebilirsiniz.</p>`;
                
                if(d.tasks.length === 0) {
                    const dl = document.getElementById('gw-download');
                    dl.disabled = false; dl.classList.remove('opacity-20', 'cursor-not-allowed');
                    dl.onclick = async () => { await updateDoc(doc(db, "links", id), { views: increment(1) }); window.location.href = d.target; };
                }
            },
            doTask: (url, i, total, target, id) => {
                window.open(url, '_blank');
                setTimeout(() => {
                    const btn = document.getElementById('gt-'+i);
                    btn.classList.add('done');
                    btn.innerHTML = `<span class="text-xs font-black uppercase text-green-500 tracking-tight">GÖREV TAMAMLANDI</span><i class="fa-solid fa-circle-check text-green-500"></i>`;
                    window.nvoData.done++;
                    if(window.nvoData.done >= total) {
                        const dl = document.getElementById('gw-download');
                        dl.disabled = false; dl.classList.remove('opacity-20', 'cursor-not-allowed');
                        dl.onclick = async () => {
                            await updateDoc(doc(db, "links", id), { views: increment(1) });
                            confetti(); setTimeout(() => window.location.href = target, 1000);
                        };
                    }
                }, 4000);
            },
            loadProfile: async () => {
                const q = query(collection(db, "links"), where("uid", "==", window.nvoData.user.uid));
                const snap = await getDocs(q);
                const list = document.getElementById('prof-links');
                let totalViews = 0;
                list.innerHTML = "";
                document.getElementById('stat-count').innerText = snap.size;
                snap.forEach(d => {
                    const data = d.data(); totalViews += (data.views || 0);
                    list.innerHTML += `
                        <div class="nvo-card p-5 flex items-center justify-between bg-zinc-900/40">
                            <div class="flex items-center gap-4">
                                <img src="${data.image}" class="w-14 h-14 rounded-2xl object-cover">
                                <div>
                                    <h4 class="text-sm font-black truncate w-32 uppercase">${data.title}</h4>
                                    <p class="text-[9px] text-blue-500 font-black uppercase">${data.views || 0} İzlenme</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigator.clipboard.writeText('${window.location.origin + window.location.pathname}?id=${d.id}');alert('Link Kopyalandı!')" class="w-10 h-10 bg-zinc-900 rounded-xl flex items-center justify-center text-zinc-500"><i class="fa-solid fa-link text-xs"></i></button>
                                <button onclick="nvoApp.del('${d.id}')" class="w-10 h-10 bg-zinc-900 rounded-xl flex items-center justify-center text-red-500/20"><i class="fa-solid fa-trash text-xs"></i></button>
                            </div>
                        </div>`;
                });
                document.getElementById('stat-views').innerText = totalViews;
            },
            del: async (id) => { if(confirm("Silmek istediğine emin misin?")) { await deleteDoc(doc(db, "links", id)); nvoApp.loadProfile(); } },
            filter: (cat, el) => {
                window.nvoData.cat = cat;
                document.querySelectorAll('.cat-chip').forEach(c => c.classList.remove('active'));
                el.classList.add('active'); nvoApp.loadFeed();
            },
            search: (val) => nvoApp.loadFeed(val)
        };

        nvoAuth.check();
    </script>
</body>
</html>
